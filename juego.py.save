import pygame
import const
from jugador import Jugador
import random
from bloque import Bloque
from raton import Raton

    animal = pygame.image.load('sprites.png')
    clock = pygame.time.Clock()
    matriz = []
    cont=0
    for x in range(8):
        row = []
        for c in range(12):
            square = animal.subsurface(32*c,32*x,32,32)
            row.append(square)
        matriz.append(row)

    game = False

    player = Jugador([0,0],matriz)
    players = pygame.sprite.Group()
    players.add(player)
    blocks = pygame.sprite.Group()
    block = Bloque([80,80])
    blocks.add(block)
    ratones = pygame.sprite.Group()
    while(not game):
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                game = True
            if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_DOWN:
                    player.acelerar(0,5,0)
                if event.key == pygame.K_UP:
                    player.acelerar(0,-5,3)
                if event.key == pygame.K_RIGHT:
                    player.acelerar(5,0,2)
                if event.key == pygame.K_LEFT:
                    player.acelerar(-5,0,1)
            if event.type == pygame.KEYUP:
                player.frenar()
        for b in blocks:
            if(b.temp < 0):
                b.temp = random.randrange(100)
                r = Raton([b.rect.x,b.rect.y],matriz)
                ratones.add(r)
                if(b.temp < 25):
                    r.velx = 5
                    r.direc =2
                

        players.update()
        ratones.update()
        block.update()
        window.fill(const.NEGRO)
        players.draw(window)
        blocks.draw(window)
        ratones.draw(window)
        pygame.display.flip()
        clock.tick(10)
